# ============================================================================
# GitHub Projects Chat Interface - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# Required variables are marked with [REQUIRED]
# Optional variables have default values shown
# ============================================================================
#
# GITHUB CODESPACES USERS:
# ========================
# When running in GitHub Codespaces, the post-start.sh script automatically
# updates GITHUB_REDIRECT_URI and FRONTEND_URL with your Codespaces URLs.
#
# However, you still need to update your GitHub OAuth App settings:
#   1. Go to https://github.com/settings/developers > OAuth Apps > Your App
#   2. Update "Authorization callback URL" to:
#      https://<your-codespace>-5173.app.github.dev/api/v1/auth/github/callback
#   3. Add your Codespaces URL to "Homepage URL" (optional)
#
# Your Codespaces URL will look like:
#   https://username-reponame-xxxx-5173.app.github.dev
#
# TIP: The post-start.sh script prints the exact callback URL to use.
# ============================================================================

# ============================================================================
# GITHUB OAUTH CONFIGURATION [REQUIRED]
# ============================================================================
# Create a GitHub OAuth App at: https://github.com/settings/developers
#
# 1. Click "New OAuth App"
# 2. Fill in:
#    - Application name: Projects Chat (or any name)
#    - Homepage URL: http://localhost:5173
#    - Authorization callback URL: http://localhost:5173/api/v1/auth/github/callback
# 3. Copy Client ID and generate a Client Secret
#
GITHUB_CLIENT_ID=your_github_oauth_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_client_secret
GITHUB_REDIRECT_URI=http://localhost:5173/api/v1/auth/github/callback

# ============================================================================
# SESSION CONFIGURATION [OPTIONAL]
# ============================================================================
# Generate a secure random key:
#   openssl rand -hex 32
#
SESSION_SECRET_KEY=generate_a_random_64_character_hex_string_here
SESSION_EXPIRE_HOURS=8

# ============================================================================
# AZURE OPENAI CONFIGURATION [OPTIONAL]
# ============================================================================
# Required for AI-powered task generation and natural language processing.
# Without these, the app will still work but AI features will be disabled.
#
# Get these from Azure Portal > Azure OpenAI > Keys and Endpoint
#
AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com
AZURE_OPENAI_KEY=your_azure_openai_api_key
AZURE_OPENAI_DEPLOYMENT=gpt-5

# ============================================================================
# GITHUB WEBHOOK CONFIGURATION [OPTIONAL]
# ============================================================================
# Required for automatic status updates when GitHub Copilot completes PRs.
# When Copilot marks a PR as ready for review, the linked issue will
# automatically be moved to "In Review" status.
#
# GITHUB_WEBHOOK_SECRET: A secret you create for webhook signature verification
#   Generate with: openssl rand -hex 32
#   Use the SAME value when configuring the webhook in GitHub
#
# GITHUB_WEBHOOK_TOKEN: A GitHub Personal Access Token (Classic) with scopes:
#   - repo (Full control of private repositories)
#   - project (Full control of projects)
#   - read:org (Read org membership - if using org projects)
#
#   Create at: https://github.com/settings/tokens/new
#   Select "Tokens (classic)" NOT "Fine-grained tokens"
#
# To configure the GitHub webhook:
#   1. Go to your repo > Settings > Webhooks > Add webhook
#   2. Payload URL: https://your-domain/api/v1/webhooks/github
#   3. Content type: application/json
#   4. Secret: Same value as GITHUB_WEBHOOK_SECRET
#   5. Events: Select "Pull requests"
#
GITHUB_WEBHOOK_SECRET=
GITHUB_WEBHOOK_TOKEN=

# ============================================================================
# COPILOT PR POLLING CONFIGURATION [OPTIONAL]
# ============================================================================
# Polling interval in seconds for checking Copilot PR completion.
# The polling service checks all issues in "In Progress" status and
# automatically updates them to "In Review" when Copilot completes the PR.
#
# Set to 0 to disable polling (rely only on webhooks).
# Default: 60 seconds
#
COPILOT_POLLING_INTERVAL=60

# ============================================================================
# DEFAULT REPOSITORY CONFIGURATION [OPTIONAL]
# ============================================================================
# Default repository for creating GitHub Issues (owner/repo format)
# If not set, issues will be created in the repository associated with
# the selected project.
#
DEFAULT_REPOSITORY=owner/repo-name

# Default assignee for issues when status is set to "In Progress"
# Leave empty to skip auto-assignment
#
DEFAULT_ASSIGNEE=

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
# These defaults work for local development and Docker
#
HOST=0.0.0.0
PORT=8000
DEBUG=true

# Frontend URL for OAuth redirects and CORS
FRONTEND_URL=http://localhost:5173

# Allowed CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:80

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================
# TTL for cached GitHub data (projects, tasks) in seconds
#
CACHE_TTL_SECONDS=300

# ============================================================================
# FRONTEND CONFIGURATION
# ============================================================================
# API base URL (used by Vite/frontend)
# In Docker, the nginx proxy handles /api/v1 routing
#
VITE_API_BASE_URL=/api/v1

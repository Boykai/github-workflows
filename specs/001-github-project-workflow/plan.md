# Implementation Plan: AI-Assisted GitHub Issue Creation and Workflow Management

**Branch**: `001-github-project-workflow` | **Date**: February 2, 2026 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/001-github-project-workflow/spec.md`

## Summary

Implement an AI-assisted workflow that transforms chat-based feature requests into structured GitHub Issues, automatically attaches them to GitHub Projects, and orchestrates status transitions through a defined pipeline (Backlog → Ready → In Progress → In Review) with automated assignments to GitHub Copilot and the project owner.

## Technical Context

**Language/Version**: Python 3.12  
**Primary Dependencies**: FastAPI, httpx, azure-ai-inference, pydantic  
**Storage**: In-memory (MVP) with session-based caching  
**Testing**: pytest, pytest-asyncio  
**Target Platform**: Linux server (Docker)  
**Project Type**: Web application (frontend + backend)  
**Performance Goals**: Issue creation < 60s, status transitions < 10s  
**Constraints**: GitHub API rate limits (5000/hour authenticated)  
**Scale/Scope**: Single user workflows, single project per session

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

| Principle | Status | Notes |
|-----------|--------|-------|
| I. Specification-First | ✅ PASS | Complete spec.md with prioritized user stories, acceptance scenarios |
| II. Template-Driven | ✅ PASS | Following plan-template.md structure |
| III. Agent-Orchestrated | ✅ PASS | Clear workflow phases with defined handoffs |
| IV. Test Optionality | ✅ PASS | Tests optional unless requested; will provide test examples in quickstart |
| V. Simplicity and DRY | ✅ PASS | Single workflow_orchestrator.py file, reuses existing services |

**Post-Design Re-check**: All principles maintained. Workflow contained in single file per user requirement.

## Project Structure

### Documentation (this feature)

```text
specs/001-github-project-workflow/
├── plan.md              # This file
├── research.md          # Technology decisions and API research
├── data-model.md        # Entity definitions and state diagram
├── quickstart.md        # Implementation guide with code patterns
├── contracts/
│   └── openapi.yaml     # API contract for workflow endpoints
└── tasks.md             # Phase 2 output (generated by /speckit.tasks)
```

### Source Code (repository root)

```text
backend/
├── src/
│   ├── api/
│   │   ├── chat.py              # MODIFY: Extend for issue_create action
│   │   └── workflow.py          # NEW: Workflow API endpoints
│   ├── models/
│   │   └── chat.py              # MODIFY: Add IssueRecommendation model
│   ├── prompts/
│   │   ├── task_generation.py   # EXISTING
│   │   └── issue_generation.py  # NEW: Issue recommendation prompt
│   └── services/
│       ├── ai_agent.py          # MODIFY: Add generate_issue_recommendation()
│       ├── github_projects.py   # MODIFY: Add create_issue(), add_issue_to_project(), assign_issue()
│       └── workflow_orchestrator.py  # NEW: All workflow logic in one file
└── tests/
    └── unit/
        └── test_workflow_orchestrator.py  # NEW: Workflow tests

frontend/
├── src/
│   ├── components/
│   │   └── chat/
│   │       └── IssueRecommendationPreview.tsx  # NEW: Display AI recommendation
│   └── hooks/
│       └── useWorkflow.ts       # NEW: Workflow confirmation hooks
```

**Structure Decision**: Web application structure with frontend/backend separation (existing). New files integrate with existing patterns - services for business logic, models for data, prompts for AI templates.

## Complexity Tracking

No complexity violations. Design follows constitution principles:

- Single file for workflow (user requirement, maintains readability)
- Reuses existing services (DRY)
- No premature abstractions
- Simple polling over webhook complexity

## Implementation Phases

### Phase 1: AI Issue Recommendation (User Story P1)

**Goal**: User sends feature request → AI generates structured recommendation

**Files**:
1. `backend/src/prompts/issue_generation.py` - NEW
2. `backend/src/services/ai_agent.py` - MODIFY
3. `backend/src/models/chat.py` - MODIFY
4. `backend/src/api/chat.py` - MODIFY

**Acceptance Criteria**:
- AC 1.1: Feature request generates recommendation with title, user_story, ui_ux_description, functional_requirements
- AC 1.2: Confirmation prompt displayed to user
- AC 1.3: Vague requests trigger clarifying questions

### Phase 2: GitHub Issue Creation (User Story P2)

**Goal**: Confirmed recommendation → GitHub Issue created → Attached to Project

**Files**:
1. `backend/src/services/github_projects.py` - MODIFY
2. `backend/src/services/workflow_orchestrator.py` - NEW
3. `backend/src/api/workflow.py` - NEW

**Acceptance Criteria**:
- AC 2.1: Confirmation creates real GitHub Issue (not draft)
- AC 2.2: Issue attached to selected GitHub Project
- AC 2.3: Issue status set to "Backlog"
- AC 2.4: Errors display clear messages in chat

### Phase 3: Status Automation (User Stories P3-P5)

**Goal**: Automatic status transitions and assignments

**Files**:
1. `backend/src/services/workflow_orchestrator.py` - MODIFY

**Acceptance Criteria**:
- AC 3.1: Backlog → Ready (automatic after creation)
- AC 3.2: Ready detection → In Progress + Copilot assignment
- AC 3.3: Completion detection → In Review + owner assignment

### Phase 4: Frontend Integration

**Goal**: Display recommendations and workflow status in chat

**Files**:
1. `frontend/src/components/chat/IssueRecommendationPreview.tsx` - NEW
2. `frontend/src/hooks/useWorkflow.ts` - NEW
3. `frontend/src/components/chat/ChatInterface.tsx` - MODIFY

**Acceptance Criteria**:
- AC 4.1: Recommendation displays with all sections
- AC 4.2: Confirm/Reject buttons functional
- AC 4.3: Status updates shown in real-time

## API Changes Summary

| Endpoint | Method | Change |
|----------|--------|--------|
| `/api/v1/chat/messages` | POST | EXTEND: Handle feature requests, return `action_type: issue_create` |
| `/api/v1/workflow/recommendations/{id}/confirm` | POST | NEW: Confirm and execute workflow |
| `/api/v1/workflow/recommendations/{id}/reject` | POST | NEW: Reject recommendation |
| `/api/v1/workflow/config` | GET/PUT | NEW: Workflow configuration |
| `/api/v1/workflow/transitions` | GET | NEW: Audit log |

## Dependencies

All dependencies already in `pyproject.toml`:
- `azure-ai-inference>=1.0.0b1`
- `httpx>=0.26.0`
- `pydantic>=2.5.0`

No new dependencies required.

## Risk Mitigations

| Risk | Mitigation |
|------|------------|
| GitHub API rate limits | Cache project metadata, batch where possible |
| "github-copilot" user not assignable | Validate assignee exists, provide clear error |
| Status field IDs change | Fetch dynamically from project metadata |
| AI quality varies | Detailed prompt with examples, allow user editing |

## References

- [research.md](./research.md) - Technology decisions
- [data-model.md](./data-model.md) - Entity definitions
- [contracts/openapi.yaml](./contracts/openapi.yaml) - API contract
- [quickstart.md](./quickstart.md) - Implementation guide
